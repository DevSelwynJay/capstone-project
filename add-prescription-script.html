<script>

        $.post('php/patientProcesses/retrieveInventory.php').done(function (data) {


             let obj = JSON.parse(data);
             let arr = []
            inventory_autocomlete(obj);
            for (const objElement of obj) {
                arr.push(objElement.name)
            }
            inventory_autocomlete(obj)
        })



    function inventory_autocomlete(obj) {
        function split( val ) {
            return val.split( / \s*/ );
        }
        function extractLast( term ) {
            return split( term ).pop();
        }

        $( "#search-inv" )
            // don't navigate away from the field on tab when selecting an item
            .on( "keydown", function( event ) {
                if ( event.keyCode === $.ui.keyCode.TAB &&
                    $( this ).autocomplete( "instance" ).menu.active ) {
                    event.preventDefault();
                }
            })
            .autocomplete({
                minLength: 0,
                source: function( request, response ) {
                    // delegate back to autocomplete, but extract the last term
                    response( $.ui.autocomplete.filter(
                       obj, extractLast( request.term ) ) );
                },
                classes: {
                    "ui-autocomplete": "highlight"
                },
                focus: function() {
                    // prevent value inserted on focus
                    return false;
                },
                select: function( event, ui ) {
                    var terms = split( this.value );
                    // remove the current input
                    terms.pop();
                    // add the selected item
                    terms.push( ui.item.value );
                    // add placeholder to get the comma-and-space at the end
                    terms.push( "" );
                    this.value = terms.join( " " );
                    //alert(ui.item.id) //get the ID of selected item
                    $("#med-name").val(ui.item.label)
                    //$( "#search-inv" ).val("")
                    return false;
                }
            }).autocomplete( "instance" )._renderItem = function( ul, item ) {
            return $( "<li>" )
                .append( "<div class='search-item' style='color:#232020'>" + "<p class='modal-p' style='color: inherit'>"+ item.label+ "<br>"+"<p style='color: inherit' class='modal-p-lighter flex-box-row justify-content-end'>x"+item.stock)
                .appendTo( ul );
        };

    }//
</script>
<style>
    .search-item{
        margin-bottom: 0.5rem !important;
        font-family: 'Poppins', sans-serif;
        font-size: large;
    }
    .search-item p{
        font-family: inherit;
        font-size: inherit;
    }
    .ui-menu-item .ui-menu-item-wrapper.ui-state-active {/*highlight color ng aito complete text*/
        background: var(--hover-color) !important;
        font-weight: bold !important;
        color: #ffffff !important;
        border: none !important;
        margin-bottom: 0.5rem !important;
    }
</style>